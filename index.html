<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Event hub by akshaydeo</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Event hub</h1>
        <p>Slim library to allow different components to communicate with each other using messages</p>

        <p class="view"><a href="https://github.com/akshaydeo/event_hub">View the Project on GitHub <small>akshaydeo/event_hub</small></a></p>


        <ul>
          <li><a href="https://github.com/akshaydeo/event_hub/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/akshaydeo/event_hub/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/akshaydeo/event_hub">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="eventhub" class="anchor" href="#eventhub"><span class="octicon octicon-link"></span></a>EventHub</h1>

<p>EventHub is a slim library to allow your different asynchronous components inside an app to communicate with each
other with very minimal overhead. Basic motivation of this idea was to allow activity to understand the state of its
different fragments inside your Android application.</p>

<h2>
<a name="architecture" class="anchor" href="#architecture"><span class="octicon octicon-link"></span></a>Architecture</h2>

<p>EventHub is a singleton class which can be accessed through getInstance() method. Architecture is based on two
components, one is Event Generator and another is Event Listeners. Event generating components register their
action using registerEventHubAction method. And listeners register for listening the events using
registerListenerForAction method.
Action generator publish and action using actionHappened method, and it remains in the store throughout the lifecycle
 unless the action generator class un-registers itself. So that even if some new listener joins an event family, it
 gets the last message happened and can decide the state of itself.</p>

<pre><code>                                     +--------------------+
                                     |                    |
                                 +---&gt; Event Listener 1   |
                                 |   |                    |
+-------------+   +----------+   |   +--------------------+
|             |   |          |   |   +--------------------+
| Event       +---&gt; EventHub +---+   |                    |
| Generator   |   |          |   +---&gt; Event Listener 2   |
+-------------+   +----------+   |   |                    |
                                 |   +--------------------+
                                 |
                                 |   +--------------------+
                                 |   |                    |
                                 +---+ Event Listener n   |
                                     |                    |
                                     +--------------------+
</code></pre>

<h2>
<a name="for-using-it-with-android" class="anchor" href="#for-using-it-with-android"><span class="octicon octicon-link"></span></a>For using it with Android</h2>

<p>You can build this library and use jar in libs to use it with your Android application. This library does not use any
 specific library related with Android. In EventHubAction you can use Bundle instead. Both EventHubAction and
 EventHubActionListener are templatized so you can use any kind of object to represent the data related with your
 action.</p>

<h2>
<a name="running-example-android-app" class="anchor" href="#running-example-android-app"><span class="octicon octicon-link"></span></a>Running example (Android APP)</h2>

<p>I have used this library in AppSurfer (<a href="http://appsurfer.com">http://appsurfer.com</a>) mobile app as well as our mobile SDK,
for fragment state communication. We had three fragments inside a ViewPager (each having its own type of filters)
showing apps related to the current category (somewhat similar to the Google Play store). Now to avoid using more
memory, I had enabled caching for only 1 invisible fragment and the third fragment would get destroyed as soon as it
leaves the cache enabled quota (using public void setOffscreenPageLimit (int limit)) of ViewPager. The category
selection dialog was a separate fragment and had its own lifecycle. Now I had to store the current selected category
by user so that as he traverses through the ViewPager he should see the updated category on each fragments.</p>

<p>In this scenario I used EventHub on the main activity, to which category fragment registers itself as category action
 event generator and all the fragments of the view pager register themselves as event listener for category action.
 So whenever a fragment gets resumed, it registers for the action, gets the latest message on that hub,
 and shows that category.</p>

<p>(This is very similar to what google play does, when it shows a tab bar with Top Free,
Top paid and on the leftmost side it has a category selection fragment).</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/akshaydeo">akshaydeo</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>